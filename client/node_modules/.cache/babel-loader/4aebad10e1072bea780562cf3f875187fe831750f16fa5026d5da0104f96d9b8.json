{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\siddn\\\\Github\\\\MERN-Full-Stack-Pet-Adoption-App-main\\\\backend\\\\client\\\\src\\\\context\\\\userContext\\\\useAuth.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { registerUser, loginUser, logoutUser, getUser } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\n\n// Export the provider as we need to wrap the entire app with it\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState();\n  const [message, setMessage] = useState();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [loadingInitial, setLoadingInitial] = useState(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    if (error) setError(null);\n  }, [location.pathname]);\n  useEffect(() => {\n    getUser().then(data => {\n      setUser(data.user);\n    }).catch(_error => {}).finally(() => setLoadingInitial(false));\n  }, []);\n  const register = user => {\n    setLoading(true);\n    setError(undefined);\n    registerUser(user).then(data => {\n      setUser(data.user);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/users/login\");\n      }, 2000);\n    }).catch(err => setError(err)).finally(() => setLoading(false));\n  };\n  const login = user => {\n    setLoading(true);\n    setError(undefined);\n    loginUser(user).then(data => {\n      setUser(data.user);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/users/my-account\");\n      }, 2000);\n    }).catch(err => setError(err)).finally(() => setLoading(false));\n  };\n  const logout = () => {\n    logoutUser().then(data => {\n      setUser(undefined);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/\");\n      }, 2000);\n    });\n  };\n  const memoedValue = useMemo(() => ({\n    user,\n    message,\n    error,\n    loading,\n    register,\n    login,\n    logout\n  }), [user, message, error, loading]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: memoedValue,\n    children: !loadingInitial && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"TuyxQoySqFiLJlP4yRRRG2FqVvE=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AuthProvider;\nexport default function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useMemo","useState","useNavigate","useLocation","registerUser","loginUser","logoutUser","getUser","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","message","setMessage","error","setError","loading","setLoading","loadingInitial","setLoadingInitial","navigate","location","pathname","then","data","catch","_error","finally","register","undefined","setTimeout","err","login","logout","memoedValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/siddn/Github/MERN-Full-Stack-Pet-Adoption-App-main/backend/client/src/context/userContext/useAuth.tsx"],"sourcesContent":["import {\n  createContext,\n  ReactNode,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport {\n  registerUser,\n  loginUser,\n  logoutUser,\n  getUser,\n} from \"../../services/api\";\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\n// Export the provider as we need to wrap the entire app with it\nexport function AuthProvider({\n  children,\n}: {\n  children: ReactNode;\n}): JSX.Element {\n  const [user, setUser] = useState<User>();\n  const [message, setMessage] = useState<AuthMessage>();\n  const [error, setError] = useState<any>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [loadingInitial, setLoadingInitial] = useState<boolean>(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    if (error) setError(null);\n  }, [location.pathname]);\n\n  useEffect(() => {\n    getUser()\n      .then((data) => {\n        setUser(data.user);\n      })\n      .catch((_error) => {})\n      .finally(() => setLoadingInitial(false));\n  }, []);\n\n  const register = (user: RegisterUser) => {\n    setLoading(true);\n    setError(undefined);\n    registerUser(user)\n      .then((data) => {\n        setUser(data.user);\n        setMessage(data.message);\n        setTimeout(() => {\n          setMessage(undefined);\n          navigate(\"/users/login\");\n        }, 2000);\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  };\n\n  const login = (user: LoginUser) => {\n    setLoading(true);\n    setError(undefined);\n    loginUser(user)\n      .then((data) => {\n        setUser(data.user);\n        setMessage(data.message);\n        setTimeout(() => {\n          setMessage(undefined);\n          navigate(\"/users/my-account\");\n        }, 2000);\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  };\n\n  const logout = () => {\n    logoutUser().then((data) => {\n      setUser(undefined);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/\");\n      }, 2000);\n    });\n  };\n\n  const memoedValue = useMemo(\n    () => ({\n      user,\n      message,\n      error,\n      loading,\n      register,\n      login,\n      logout,\n    }),\n    [user, message, error, loading]\n  );\n\n  return (\n    <AuthContext.Provider value={memoedValue}>\n      {!loadingInitial && children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default function useAuth() {\n  return useContext(AuthContext);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}